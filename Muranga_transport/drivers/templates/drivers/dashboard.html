{% extends "drivers/base.html" %}
{% load static %}

{% block title %}Dashboard | Drivers{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'drivers/css/profile.css' %}">
{% endblock %}

{% block content %}

  <!-- Top Navigation Bar -->
  <header class="top-nav">
    <button class="sidebar-toggle">
      <i class="fas fa-bars"></i>
    </button>
    <div class="nav-right">
      <span class="user-greeting">
        {% if driver %}
          Welcome, {{ driver.user.first_name }}
        {% else %}
          Welcome, Driver
        {% endif %}
      </span>
      <img src="{% static 'drivers/images/murangalogo.jpg' %}" alt="User" class="user-avatar">
    </div>
  </header>

  <div class="page-header">
    <h1 class="page-title">My Profile</h1>
  </div>

  <div class="profile-container">

    <!-- Profile Sidebar -->
    <div class="profile-sidebar">
      {% if driver.profile_image %}
        <img src="{{ driver.profile_image.url }}" alt="Profile Picture" class="profile-picture">
      {% else %}
        <img src="{% static 'drivers/images/default-profile.png' %}" alt="Profile Picture" class="profile-picture">
      {% endif %}
      <h2 style="text-align: center;">{{ driver.user.get_full_name|default:"Your Name" }}</h2>
      <p style="text-align: center; color: var(--dark-gray); margin-bottom: 20px;">
        ID: {{ driver.driver_id|default:"DRV-XXXXXX" }}
      </p>

      <div style="text-align: center; margin-bottom: 20px;">
        <span class="license-badge">
          <i class="fas fa-id-card"></i>
          License: {{ driver.license_class|default:"None" }}
        </span>
      </div>

      <div class="profile-actions">
        <a href="{% url 'drivers:profile_edit' %}" class="btn-modern">
          <i class="fas fa-edit"></i> Edit Profile
        </a>
      </div>
    </div>

    <!-- Profile Content -->
    <div class="profile-content">

      <!-- Personal Information -->
      <div class="profile-section">
        <h2><i class="fas fa-id-card"></i> Personal Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Full Names</div>
            <div class="info-value">{{ driver.user.get_full_name }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Driver ID</div>
            <div class="info-value">{{ driver.driver_id }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Phone Number</div>
            <div class="info-value">{{ driver.phone_number }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Email Address</div>
            <div class="info-value">{{ driver.user.email }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Join Date</div>
            <div class="info-value">{{ driver.join_date }}</div>
          </div>
        </div>
      </div>

      <!-- Professional Information -->
      <div class="profile-section">
        <h2><i class="fas fa-briefcase"></i> Professional Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">License Class</div>
            <div class="info-value">{{ driver.license_class }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Experience</div>
            <div class="info-value">{{ driver.experience_years }} years</div>
          </div>
          <div class="info-item">
            <div class="info-label">Department</div>
            <div class="info-value">{{ driver.department }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Supervisor</div>
            <div class="info-value">{{ driver.supervisor }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Current Vehicle</div>
            <div class="info-value">{{ driver.current_vehicle }}</div>
          </div>
        </div>
      </div>

    </div>
  </div>

{% endblock %}

{% block extra_js %}
  <script src="{% static 'drivers/js/profile.js' %}"></script>
{% endblock %}

